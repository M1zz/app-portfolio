#!/bin/bash
# CEO 일일 브리핑 생성 스크립트
# 매일 아침 5분 안에 읽을 수 있는 경영 브리핑

set -e

TODAY=$(date +"%Y년 %m월 %d일")
BRIEFING_FILE="reports/ceo-briefing-$(date +%Y-%m-%d).md"

echo "📊 CEO 일일 브리핑 생성 중..."
echo ""

claude << EOF
오늘은 ${TODAY}입니다.

포트폴리오 데이터를 분석해서 CEO를 위한 일일 브리핑을 생성해주세요:

# 📊 CEO Daily Briefing - ${TODAY}

## 🎯 Executive Summary (30초 요약)
- 어제 완료된 태스크: X개
- 오늘 집중할 앱: [앱명]
- 주의가 필요한 앱: [앱명] - 이유

## 🚨 긴급 의사결정 필요
우선순위 높은 앱 중에서 의사결정이 필요한 사항을 1-2개만 선정:

┌─────────────────────────────────────────┐
│ [앱명] 이슈/결정사항                     │
├─────────────────────────────────────────┤
│ 상황: [간단한 설명]                      │
│                                         │
│ 옵션 A: [방법 1] (예상 시간)            │
│ 옵션 B: [방법 2] (예상 시간)            │
│                                         │
│ 추천: [이유와 함께]                      │
│ 결정: [A/B/보류]                        │
└─────────────────────────────────────────┘

## 📈 우선순위 높은 앱 현황 (Top Priority Apps)
우선순위 높은 앱들의 상태를 3-5줄로 요약:

1. **[앱명]** - [진행률]%
   - 상태: [진행 중/정체/완료 임박]
   - 다음: [다음 액션]
   - 주의: [있으면 표시]

## 💡 오늘의 제안
AI 분석 기반 제안 1-2개:
- [구체적인 액션 아이템] → [예상 효과]
- 승인 필요: [Yes/No]

## ⚠️ 위험 요소
주의가 필요한 앱이나 상황:
- [앱명]: [문제] → 제안: [해결책]
- 결정: [승인/거부/보류]

## 📊 포트폴리오 KPI (어제 대비)
| 지표 | 현재 | 변화 |
|------|------|------|
| 전체 완료율 | XX% | ↑/↓ X%p |
| 진행 중 | XX개 | ↑/↓ X개 |
| 이번 주 배포 예정 | XX개 | - |

---
💬 **다음 액션**: 결정사항을 회신하거나 "자동 실행"이라고 답하세요.

---

**주의사항:**
- CEO가 5분 안에 읽고 결정할 수 있도록 간결하게
- 불필요한 세부사항 제외
- 의사결정이 필요한 것만 포함
- 긴급/중요도 순으로 정렬
- 숫자와 데이터 기반

파일 저장: ${BRIEFING_FILE}
EOF

echo ""
echo "✅ 브리핑 생성 완료: ${BRIEFING_FILE}"
echo ""
echo "📖 브리핑 보기:"
echo "   cat ${BRIEFING_FILE}"
echo ""
echo "또는 지금 바로 보기:"
cat "${BRIEFING_FILE}" 2>/dev/null || echo "브리핑 파일을 확인하세요."
