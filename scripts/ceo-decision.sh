#!/bin/bash
# CEO μμ‚¬κ²°μ • μ²λ¦¬ μ¤ν¬λ¦½νΈ
# CEOμ κ²°μ •μ„ λ°›μ•„μ„ μλ™μΌλ΅ μ‹¤ν–‰

set -e

DECISION_TYPE="$1"
DECISION_VALUE="$2"

if [ -z "$DECISION_TYPE" ]; then
    echo "β μ‚¬μ©λ²•: $0 [νƒ€μ…] [κ²°μ •]"
    echo ""
    echo "νƒ€μ…:"
    echo "  briefing     - μΌμΌ λΈλ¦¬ν•‘ κ²°μ • μ‹¤ν–‰"
    echo "  weekly       - μ£Όκ°„ λ¦¬λ·° κ²°μ • μ‹¤ν–‰"
    echo "  deploy       - λ°°ν¬ μΉμΈ μ‹¤ν–‰"
    echo "  priority     - μ°μ„ μμ„ λ³€κ²½ μ‹¤ν–‰"
    echo ""
    echo "μμ‹:"
    echo "  $0 briefing approve    # λΈλ¦¬ν•‘μ λ¨λ“  μ μ• μΉμΈ"
    echo "  $0 deploy λ‘λ²μ•λ¦Ό     # λ‘ λ² μ•λ¦Ό λ°°ν¬ μΉμΈ"
    exit 1
fi

echo "π― CEO μμ‚¬κ²°μ • μ‹¤ν–‰ μ¤‘..."
echo "   νƒ€μ…: $DECISION_TYPE"
echo "   κ²°μ •: $DECISION_VALUE"
echo ""

case $DECISION_TYPE in
    briefing)
        if [ "$DECISION_VALUE" = "approve" ] || [ "$DECISION_VALUE" = "μΉμΈ" ]; then
            echo "β… μ¤λμ λ¨λ“  μ μ•μ„ μΉμΈν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤..."

            # Claudeμ—κ² μ‹¤ν–‰ μ§€μ‹
            claude << EOF
μ¤λ CEO λΈλ¦¬ν•‘μ—μ„ μ μ•ν• λ¨λ“  ν•­λ©μ„ μ‹¤ν–‰ν•΄μ¤:

1. κΈ΄κΈ‰ μμ‚¬κ²°μ • ν•­λ© μ‹¤ν–‰
2. μ¤λμ μ μ• μ‹¤ν–‰
3. μ„ν— μ”μ† ν•΄κ²°μ±… μ‹¤ν–‰

κ° ν•­λ©μ„ μ‹¤ν–‰ν•κ³ :
- νƒμ¤ν¬ μ—…λ°μ΄νΈ
- κ΄€λ ¨ νμΌ μμ •
- μ§„ν–‰μƒν™© κΈ°λ΅

μ‹¤ν–‰ κ²°κ³Όλ¥Ό κ°„λ‹¨ν μ”μ•½ν•΄μ„ λ³΄κ³ ν•΄μ¤.
EOF
        fi
        ;;

    weekly)
        if [ "$DECISION_VALUE" = "approve" ] || [ "$DECISION_VALUE" = "λ¨λ‘μΉμΈ" ]; then
            echo "β… μ΄λ² μ£Ό μ „λµ μ μ•μ„ λ¨λ‘ μΉμΈν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤..."

            claude << EOF
μ΄λ² μ£Ό CEO μ£Όκ°„ λ¦¬λ·°μ—μ„ μ μ•ν• μ „λµλ“¤μ„ μ‹¤ν–‰ν•΄μ¤:

1. λ¨λ“  μ „λµ μ μ• μ‹¤ν–‰
2. λ¦¬μ†μ¤ μ¬λ°°λ¶„ (μμΌλ©΄)
3. λ‹¤μ μ£Ό μ°μ„ μμ„ μ„¤μ •
4. μ•΅μ… μ•„μ΄ν… μ²λ¦¬

μ‹¤ν–‰ κ²°κ³Όλ¥Ό κ°„λ‹¨ν μ”μ•½ν•΄μ„ λ³΄κ³ ν•΄μ¤.
EOF
        fi
        ;;

    deploy)
        APP_NAME="$DECISION_VALUE"
        echo "β… ${APP_NAME} λ°°ν¬λ¥Ό μΉμΈν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤..."

        claude << EOF
"${APP_NAME}" μ•±μ„ λ°°ν¬ν•΄μ¤:

1. λ¦΄λ¦¬μ¤ λ…ΈνΈ μƒμ„±
2. λ²„μ „ μ—…λ°μ΄νΈ
3. λΉλ“ λ° TestFlight μ—…λ΅λ“ μ¤€λΉ„
4. ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„° μ—…λ°μ΄νΈ

λ°°ν¬ μ²΄ν¬λ¦¬μ¤νΈλ¥Ό λ”°λΌμ„ μ§„ν–‰ν•κ³ , μ™„λ£λλ©΄ λ³΄κ³ ν•΄μ¤.
EOF
        ;;

    *)
        echo "β μ• μ μ—†λ” κ²°μ • νƒ€μ…: $DECISION_TYPE"
        exit 1
        ;;
esac

echo ""
echo "β… μμ‚¬κ²°μ • μ‹¤ν–‰ μ™„λ£!"
echo ""
echo "π“ κ²°κ³Ό ν™•μΈ:"
echo "   ./scripts/ceo-dashboard.sh"
